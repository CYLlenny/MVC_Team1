@model IEnumerable<Bbt1.Models.Order>

@{
    ViewBag.Title = "Order Management";
}

<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title h2">Order Management</h4>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table id="basic-datatables" class="display table table-striped table-hover">
                        <thead>
                            <tr>
                                <th></th>
                                <th>
                                    @*@Html.DisplayNameFor(model => model.Member.m_name)*@
                                    訂購人
                                </th>
                                <th>
                                    @*@Html.DisplayNameFor(model => model.o_receiver)*@
                                    收件人
                                </th>
                                <th>
                                    @*@Html.DisplayNameFor(model => model.o_address)*@
                                    收件地址
                                </th>
                                <th>
                                    @*@Html.DisplayNameFor(model => model.Delive_Way.dw_name)*@
                                    寄貨方式
                                </th>
                                <th>
                                    @*@Html.DisplayNameFor(model => model.Payment.pay_name)*@
                                    付款方式
                                </th>
                                <th>
                                    @*@Html.DisplayNameFor(model => model.o_date)*@
                                    訂購日期
                                </th>
                                <th>
                                    @*@Html.DisplayNameFor(model => model.o_delivedate)*@
                                    出貨日期
                                </th>
                                <th>
                                    @*@Html.DisplayNameFor(model => model.o_status)*@
                                    出貨狀態
                                </th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>
                                        <a href="#" class="alert_demo_7"><i class="fa fa-times" style="color:red;font-size:18px;"></i></a>
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Member.m_name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.o_receiver)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.o_address)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Delive_Way.dw_name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Payment.pay_name)
                                    </td>
                                    <td>
                                        @*@Html.DisplayFor(modelItem => item.o_date)*@
                                        @DateTime.Parse(item.o_date.ToString()).ToString("yyyy-MM-dd HH:mm:ss")
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.o_delivedate)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.o_status)
                                        @if (item.o_status == 0.ToString())
                                        {
                                            <label>訂單成立</label>
                                        }
                                        else if (item.o_status == 1.ToString())
                                        {
                                            <label>已出貨</label>
                                        }
                                        else if (item.o_status == 2.ToString())
                                        {
                                            <label>已送達</label>
                                        }
                                        else if (item.o_status == 3.ToString())
                                        {
                                            <label>訂單已完成</label>
                                        }
                                        else if (item.o_status == 4.ToString())
                                        {
                                            <label>申請退貨</label>
                                        }
                                    </td>
                                    <td>

                                        @Html.ActionLink("查詢訂單", "OrderDetail", new { id = item.o_id }, new { @class = "btn btn-outline-secondary", @style = "width:80px;font-size:14px" })
                                        @if (item.o_status == 0.ToString())
                                        {
                                            @Html.ActionLink("出貨", "Ship", new { id = item.o_id }, new { @class = "btn btn-outline-secondary alert_demo_3_3", @style = "width:50px;font-size:14px" })
                                        }
                                        else if (item.o_status == 1.ToString())
                                        {
                                            @Html.ActionLink("出貨", "Edit", new { id = item.o_id }, new { @class = "btn btn-outline-secondary disabled", @style = "width:50px;font-size:14px" })
                                        }
                                        @*<button type="button" class="btn btn-success alert_demo_3_3"> Success</button>*@
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/Assets/vendor/jquery/jquery.js"></script>
<script>
    $('.alert_demo_3_3').click(function (e) {
        swal("Successful shipment!", "You clicked the button!", {
            icon: "success",
            buttons: {
                confirm: {
                    className: 'btn btn-success'
                }
            },
        });
    });
</script>
<script>
    $('.alert_demo_7').click(function (e) {
        swal({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            type: 'warning',
            buttons: {
                confirm: {
                    text: 'Yes, delete it !',
                    className: 'btn btn-success'
                },
                cancel: {
                    visible: true,
                    className: 'btn btn-danger'
                }
            }
        }).then((Delete) => {
            if (Delete) {
                swal({
                    title: 'Deleted!',
                    text: 'The Order has been deleted.',
                    type: 'success',
                    buttons: {
                        confirm: {
                            className: 'btn btn-success'
                        }
                    }
                });

            } else {
                swal.close();
            }
        });
    });

</script>